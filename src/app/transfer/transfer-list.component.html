<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5 class="mb-0">Transfers</h5>
      <div>
        <button class="btn btn-primary btn-sm" (click)="goCreate()">
          <i class="fa fa-plus"></i> Create Transfer
        </button>
      </div>
    </div>
  
    <div class="card-body">
      <div class="mb-3 d-flex gap-2 align-items-center">
        <select (change)="load()" class="form-select form-select-sm w-auto">
          <option value="">All statuses</option>
          <option value="in_transfer">In Transfer</option>
          <option value="transfer_accepted">Transfer Accepted</option>
          <option value="returning">Returning</option>
          <option value="return_accepted">Return Accepted</option>
        </select>
        <button class="btn btn-outline-secondary btn-sm" (click)="load()">Refresh</button>
      </div>
  
      <table class="table table-sm table-hover">
        <thead>
          <tr>
            <th>ID</th>
            <th>From → To</th>
            <th>Item</th>
            <th>Qty</th>
            <th>Status</th>
            <th>Created</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let t of transfers">
            <td>{{ t.transferId }}</td>
            <td>{{ t.fromRoomId }} → {{ t.toRoomId }}</td>
            <td>
              {{ t.itemType }}<span *ngIf="t.itemId"> #{{ t.itemId }}</span>
            </td>
            <td>{{ t.quantity }}</td>
            <td><span class="badge bg-secondary text-light">{{ t.status }}</span></td>
            <td>{{ t.createdAt | date:'short' }}</td>
            <td>
              <button class="btn btn-sm btn-light" (click)="view(t)">View</button>
  
              <button *ngIf="canAccept(t)" class="btn btn-sm btn-success" (click)="accept(t)">Accept</button>
  
              <button *ngIf="canReturn(t)" class="btn btn-sm btn-warning" (click)="initiateReturn(t)">Return</button>
  
              <button *ngIf="canAcceptReturned(t)" class="btn btn-sm btn-primary" (click)="acceptReturned(t)">Accept Returned</button>
            </td>
          </tr>
        </tbody>
      </table>
  
      <div *ngIf="!transfers || transfers.length === 0" class="text-center text-muted">No transfers yet.</div>
    </div>
  </div>