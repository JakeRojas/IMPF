<div class="inventory-list-wrapper mt-2">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h5 class="fw-bold mb-0 text-dark">
      <i class="bi bi-grid-3x3-gap text-primary me-2"></i>General Items Inventory
    </h5>

    <div class="actions">
      <button class="btn btn-primary btn-sm shadow-sm px-3" (click)="generateAllQr()"
        [disabled]="loading || inventory.length === 0">
        <i class="bi bi-file-earmark-pdf me-1"></i> Generate All (PDF)
      </button>
    </div>
  </div>

  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border text-primary border-3" role="status"></div>
    <p class="text-muted mt-2 small fw-bold">Loading inventory...</p>
  </div>

  <div class="card border-0 shadow-sm overflow-hidden" *ngIf="!loading && inventory?.length">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="bg-light">
          <tr>
            <th class="px-4 py-3">Item Details</th>
            <th class="py-3">Category / Spec</th>
            <th class="py-3 text-center">Stock Quantity</th>
            <th class="py-3">QR Status</th>
            <th class="py-3">Last Updated</th>
            <th class="py-3 text-end px-4">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let i of inventory">
            <td class="px-4">
              <div class="fw-bold text-dark">{{ i.genItemName || i.name }}</div>
              <div class="small text-muted">ID: <span class="badge bg-light text-dark border ms-1">#{{
                  i.genItemInventoryId }}</span></div>
            </td>
            <td>
              <div class="small fw-semibold text-secondary">{{ i.genItemType || i.type || '-' }}</div>
              <div class="extra-small text-muted text-uppercase">{{ i.genItemSize || i.size || 'No Size' }}</div>
            </td>
            <td class="text-center">
              <div class="d-inline-block px-3 py-1 rounded-pill fw-bold" [ngClass]="{
                'bg-success-subtle text-success': (i.totalQuantity || i.quantity || 0) > 10,
                'bg-warning-subtle text-warning': (i.totalQuantity || i.quantity || 0) > 0 && (i.totalQuantity || i.quantity || 0) <= 10,
                'bg-danger-subtle text-danger': (i.totalQuantity || i.quantity || 0) === 0
              }">
                {{ i.totalQuantity || i.quantity || 0 }}
              </div>
            </td>
            <td>
              <span class="badge rounded-pill px-2 py-1"
                [ngClass]="i.qrStatus ? 'bg-info-subtle text-info' : 'bg-light text-muted border'">
                <i class="bi" [ngClass]="i.qrStatus ? 'bi-check-circle-fill me-1' : 'bi-dash-circle me-1'"></i>
                {{ i.qrStatus ? 'Generated' : 'Pending' }}
              </span>
            </td>
            <td class="small text-muted">
              {{ (i.updatedAt || i.createdAt) | date:'mediumDate' }}
            </td>
            <td class="text-end px-4">
              <button class="btn btn-sm shadow-sm" [ngClass]="i.qrStatus ? 'btn-light disabled' : 'btn-outline-primary'"
                (click)="downloadItemQr(i)" [disabled]="i.qrStatus">
                <i class="bi bi-qr-code me-1"></i> {{ i.qrStatus ? 'Downloaded' : 'Generate QR' }}
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="text-center py-5 bg-white rounded-4 shadow-sm" *ngIf="!loading && (!inventory || inventory.length === 0)">
    <i class="bi bi-grid-3x3-gap text-muted opacity-25" style="font-size: 4rem;"></i>
    <h5 class="mt-3 fw-bold text-dark">No Inventory Records</h5>
    <p class="text-muted small">No general item inventory has been recorded here yet.</p>
  </div>
</div>

<style>
  .extra-small {
    font-size: 0.7rem;
  }
</style>