<div class="receive-list-wrapper mt-2">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h5 class="fw-bold mb-0 text-dark">
      <i class="bi bi-grid-3x3-gap text-primary me-2"></i>Received General Items
    </h5>
  </div>

  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border text-primary border-3" role="status"></div>
    <p class="text-muted mt-2 small fw-bold">Loading receive history...</p>
  </div>

  <div class="card border-0 shadow-sm overflow-hidden" *ngIf="!loading && batches?.length">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="bg-light">
          <tr>
            <th class="px-4 py-3">Batch Info</th>
            <th class="py-3">General Item</th>
            <th class="py-3 text-center">Qty</th>
            <th class="py-3">Source / Origin</th>
            <th class="py-3">Received By</th>
            <th class="py-3">Date</th>
            <th class="py-3 px-4">Notes</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let b of batches">
            <td class="px-4">
              <span class="badge bg-primary-subtle text-primary fw-bold">#{{ b.receiveGenItemId }}</span>
            </td>
            <td>
              <div class="fw-bold text-dark">{{ b.genItemName }}</div>
              <div class="extra-small text-muted">
                {{ b.genItemType }} • {{ b.genItemSize || 'No Size' }}
              </div>
            </td>
            <td class="text-center">
              <span class="fw-bold fs-5 text-primary">{{ b.genItemQuantity }}</span>
            </td>
            <td>
              <div class="small fw-semibold">{{ b.receivedFrom || 'External Source' }}</div>
            </td>
            <td>
              <div class="d-flex align-items-center">
                <div
                  class="avatar-sm bg-light text-muted rounded-circle me-2 d-flex align-items-center justify-content-center"
                  style="width: 24px; height: 24px;">
                  <i class="bi bi-person small"></i>
                </div>
                <span class="small">{{ b.receivedByName || b.receivedBy || 'System' }}</span>
              </div>
            </td>
            <td class="small text-muted">
              {{ (b.createdAt || b.receivedAt) | date:'mediumDate' }}
              <div class="extra-small">{{ (b.createdAt || b.receivedAt) | date:'shortTime' }}</div>
            </td>
            <td class="px-4 small text-muted italic">
              {{ b.notes || '—' }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="text-center py-5 bg-white rounded-4 shadow-sm" *ngIf="!loading && (!batches || batches.length === 0)">
    <i class="bi bi-grid-3x3-gap text-muted opacity-25" style="font-size: 4rem;"></i>
    <h5 class="mt-3 fw-bold text-dark">No Receive Records</h5>
    <p class="text-muted small">No general item batches have been received into this room yet.</p>
  </div>
</div>

<style>
  .extra-small {
    font-size: 0.7rem;
  }

  .italic {
    font-style: italic;
  }
</style>