<div class="card mb-4 border-0 shadow-sm">
  <div class="card-body p-3">
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-3">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb m-0 p-0">
          <li class="breadcrumb-item active">Room List</li>
        </ol>
      </nav>

      <div class="d-flex flex-column flex-md-row gap-2 align-items-md-center">
        <!-- Search Input -->
        <div class="input-group input-group-sm" style="max-width: 300px;">
          <span class="input-group-text bg-white border-end-0"><i class="bi bi-search text-muted"></i></span>
          <input type="text" class="form-control border-start-0 ps-0" placeholder="Search rooms..."
            [(ngModel)]="searchText">
        </div>

        <!-- Filter Dropdown -->
        <select class="form-select form-select-sm border-0 bg-light-subtle shadow-sm"
          style="width: auto; min-width: 150px;" [(ngModel)]="selectedType">
          <option value="">All Room Types</option>
          <option *ngFor="let type of roomTypes" [value]="type">{{ type }}</option>
        </select>

        <!-- <a *ngIf="isSuperAdmin" class="btn btn-primary btn-sm px-3 shadow-sm d-flex align-items-center gap-2"
          routerLink="add">
          <i class="bi bi-plus-lg"></i>Create Room
        </a> -->
      </div>
    </div>
  </div>
</div>

<div class="room-grid">
  <div class="row g-4">
    <div class="col-12 col-sm-6 col-lg-4 col-xl-3" *ngFor="let r of filteredRooms">
      <div class="card h-100 border-0 shadow-sm transition-hover">
        <div class="card-body p-4">
          <div class="d-flex justify-content-between align-items-start mb-3">
            <div
              class="room-icon-bg bg-primary-subtle text-primary rounded-3 d-flex align-items-center justify-content-center"
              style="width: 48px; height: 48px;">
              <i class="bi bi-door-open fs-4"></i>
            </div>
            <span class="badge rounded-pill" [ngClass]="{
              'bg-info-subtle text-info': r.roomType === 'Laboratory',
              'bg-warning-subtle text-warning': r.roomType === 'Stockroom',
              'bg-success-subtle text-success': r.roomType === 'Department',
              'bg-secondary-subtle text-secondary': r.roomType !== 'Laboratory' && r.roomType !== 'Stockroom' && r.roomType !== 'Department'
            }">{{ r.roomType }}</span>
          </div>

          <h5 class="card-title fw-bold mb-1">{{ r.roomName }}</h5>
          <p class="text-muted small mb-3"><i class="bi bi-layers me-1"></i>Floor: {{ r.roomFloor }}</p>

          <div class="room-info-item d-flex align-items-center mb-2">
            <i class="bi bi-person-circle text-muted me-2"></i>
            <span class="small">{{ r.Account.firstName }} {{ r.Account.lastName }}</span>
          </div>

          <div *ngIf="r.stockroomType" class="room-info-item d-flex align-items-center">
            <i class="bi bi-tag text-muted me-2"></i>
            <span class="small text-muted">{{ r.stockroomType }}</span>
          </div>
        </div>

        <div class="card-footer bg-transparent border-0 p-4 pt-0 d-flex gap-2">
          <button class="btn btn-primary btn-sm flex-grow-1 py-2" [routerLink]="['/room', r.roomId]">View Room</button>
          <button class="btn btn-outline-secondary btn-sm py-2 px-3" *ngIf="isSuperAdmin" (click)="updateRoom(r)">
            <i class="bi bi-pencil-square"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div class="col-12 text-center py-5" *ngIf="filteredRooms.length === 0">
      <div class="mb-3">
        <i class="bi bi-search text-muted" style="font-size: 3rem; opacity: 0.3;"></i>
      </div>
      <h5 class="text-muted">No rooms found matching your criteria</h5>
      <button class="btn btn-link text-primary" (click)="searchText = ''; selectedType = ''">Clear all filters</button>
    </div>
  </div>
</div>