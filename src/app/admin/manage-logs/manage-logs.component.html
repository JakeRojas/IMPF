<div class="row mb-3">
    <div class="col-md-2">
        <label>Start Date</label>
        <input type="date" class="form-control" [(ngModel)]="startDate">
    </div>
    <div class="col-md-2">
        <label>End Date</label>
        <input type="date" class="form-control" [(ngModel)]="endDate">
    </div>
    <div class="col-md-2">
        <label>Action Type</label>
        <input type="text" class="form-control" placeholder="e.g. login, request" [(ngModel)]="actionType">
    </div>
    <div class="col-md-2 col-lg-3 d-flex align-items-end">
        <button class="btn btn-primary me-2" (click)="loadLogs()">Filter</button>
        <button class="btn btn-secondary" (click)="clearFilters()">Clear</button>
    </div>
</div>

<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th style="width: 15%">Date</th>
                <th style="width: 15%">User</th>
                <th style="width: 15%">Role</th>
                <th style="width: 15%">Action</th>
                <th style="width: 40%">Details</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let log of logs">
                <td>{{log.timestamp}}</td>
                <td>
                    <div>{{log.userName}}</div>
                    <small class="text-muted">{{log.userEmail}}</small>
                </td>
                <td><span class="badge bg-info text-dark">{{log.userRole}}</span></td>
                <td><span class="badge bg-primary">{{log.actionType}}</span></td>
                <td>{{log.actionDetails}}</td>
            </tr>
            <tr *ngIf="!logs.length && !loading">
                <td colspan="5" class="text-center">No logs found</td>
            </tr>
            <tr *ngIf="loading">
                <td colspan="5" class="text-center">
                    <span class="spinner-border spinner-border-sm mr-1"></span>
                    Loading logs...
                </td>
            </tr>
        </tbody>
    </table>
</div>

<div class="d-flex justify-content-between align-items-center mt-3" *ngIf="totalPages > 1 && !loading">
    <div class="text-muted">
        Showing {{ (page - 1) * limit + 1 }} to {{ (page * limit) > total ? total : (page * limit) }} of {{ total }}
        logs
    </div>
    <nav aria-label="Page navigation">
        <ul class="pagination mb-0">
            <li class="page-item" [class.disabled]="page === 1">
                <button class="page-link" (click)="onPageChange(page - 1)">Previous</button>
            </li>
            <li class="page-item" *ngFor="let p of range(1, totalPages)" [class.active]="page === p">
                <button class="page-link" (click)="onPageChange(p)">{{ p }}</button>
            </li>
            <li class="page-item" [class.disabled]="page === totalPages">
                <button class="page-link" (click)="onPageChange(page + 1)">Next</button>
            </li>
        </ul>
    </nav>
</div>