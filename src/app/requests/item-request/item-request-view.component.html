<div class="container p-3">
    <button class="btn btn-link mb-2" (click)="goBack()">&larr; Back</button>
  
    <div *ngIf="request">
      <h4>Item Request #{{ request.itemRequestId || request.id }}</h4>
      <dl class="row">
        <dt class="col-sm-3">Room</dt><dd class="col-sm-9">{{ request.requesterRoomId }}</dd>
        <dt class="col-sm-3">Requester</dt><dd class="col-sm-9">{{ request.acccountId }}</dd>
        <dt class="col-sm-3">Status</dt><dd class="col-sm-9">{{ request.status }}</dd>
        <dt class="col-sm-3">Note</dt><dd class="col-sm-9">{{ request.note }}</dd>
        <dt class="col-sm-3">Created</dt><dd class="col-sm-9">{{ request.createdAt | date:'short' }}</dd>
      </dl>
  
      <hr />
      <h5>Requested Items</h5>
  
      <table class="table table-sm">
        <thead><tr><th>#</th><th>Type</th><th>Item ID</th><th>Qty</th><th>Note</th></tr></thead>
        <tbody>
          <tr *ngFor="let it of request.items; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ it.itemType }}</td>
            <td>{{ it.itemId }}</td>
            <td>{{ it.quantity }}</td>
            <td>{{ it.note }}</td>
          </tr>
        </tbody>
      </table>
  
      <div class="mt-3">
        <button *ngIf="isStockroomAdmin() && request.status === 'pending'" class="btn btn-success me-1" (click)="accept()">Accept</button>
        <button *ngIf="isStockroomAdmin() && request.status === 'pending'" class="btn btn-warning me-1" (click)="decline()">Decline</button>
        <button *ngIf="isTeacher() && request.status === 'accepted'" class="btn btn-danger" (click)="fulfill()">Fulfill</button>
      </div>
    </div>
  
    <div *ngIf="loading" class="text-center"><span class="spinner-border spinner-border-sm"></span></div>
  </div>
  